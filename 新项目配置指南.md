# ğŸ”§ æ–° Firebase é¡¹ç›®é…ç½®æŒ‡å—

## é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®ID**: `big-pig-38efe`
- **é¡¹ç›®åç§°**: Big Pig
- **æ§åˆ¶å°**: https://console.firebase.google.com/project/big-pig-38efe

---

## ğŸ“‹ é…ç½®æ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šåˆ‡æ¢ Firebase é¡¹ç›®

åœ¨ PowerShell ä¸­è¿è¡Œï¼š

```powershell
firebase use big-pig-38efe
```

æˆ–è€…åŒå‡»è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶ï¼š
```
åˆ‡æ¢åˆ°æ–°é¡¹ç›®.bat
```

---

### ç¬¬ 2 æ­¥ï¼šåœ¨ Firebase æ§åˆ¶å°å¯ç”¨å¿…è¦æœåŠ¡

è®¿é—®ï¼šhttps://console.firebase.google.com/project/big-pig-38efe

#### 2.1 å¯ç”¨ Firestoreï¼ˆèŠå¤©å®¤åŠŸèƒ½ï¼‰

1. å·¦ä¾§èœå• â†’ **Firestore Database**
2. ç‚¹å‡» **"åˆ›å»ºæ•°æ®åº“"**
3. é€‰æ‹© **"ä»¥æµ‹è¯•æ¨¡å¼å¯åŠ¨"**ï¼ˆç¨åä¼šæ›´æ–°è§„åˆ™ï¼‰
4. é€‰æ‹©æœåŠ¡å™¨ä½ç½®ï¼ˆæ¨èï¼š`asia-southeast1` - æ–°åŠ å¡ï¼‰
5. ç‚¹å‡» **"å¯ç”¨"**

#### 2.2 å¯ç”¨ Realtime Databaseï¼ˆæ¸¸æˆåŠŸèƒ½ï¼‰

1. å·¦ä¾§èœå• â†’ **Realtime Database**
2. ç‚¹å‡» **"åˆ›å»ºæ•°æ®åº“"**
3. é€‰æ‹©æœåŠ¡å™¨ä½ç½®ï¼ˆæ¨èï¼š`asia-southeast1` - æ–°åŠ å¡ï¼‰
4. é€‰æ‹© **"ä»¥æµ‹è¯•æ¨¡å¼å¯åŠ¨"**
5. ç‚¹å‡» **"å¯ç”¨"**

#### 2.3 å‡çº§åˆ° Blaze æ–¹æ¡ˆï¼ˆCloud Functionsï¼‰

1. å·¦ä¸‹è§’ç‚¹å‡» **"å‡çº§"** æˆ– **"Upgrade"**
2. é€‰æ‹© **"Blaze - æŒ‰é‡ä»˜è´¹"**
3. ç»‘å®šæ”¯ä»˜æ–¹å¼ï¼ˆä¿¡ç”¨å¡/å€Ÿè®°å¡ï¼‰
4. ç¡®è®¤å‡çº§

**ğŸ’° è´¹ç”¨è¯´æ˜ï¼š**
- Cloud Functions æ¯æœˆæœ‰å¤§é‡å…è´¹é¢åº¦
- é¢„ä¼°è´¹ç”¨ï¼šåŸºæœ¬åœ¨å…è´¹èŒƒå›´å†…
- å»ºè®®è®¾ç½®é¢„ç®—è­¦æŠ¥ï¼ˆå¦‚ $10/æœˆï¼‰

---

### ç¬¬ 3 æ­¥ï¼šé…ç½®æ•°æ®åº“è§„åˆ™

#### 3.1 Firestore è§„åˆ™

è®¿é—®ï¼šhttps://console.firebase.google.com/project/big-pig-38efe/firestore/rules

ç²˜è´´ä»¥ä¸‹è§„åˆ™ï¼š

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ç”¨æˆ·é›†åˆï¼šåªèƒ½è¯»å–è‡ªå·±çš„æ•°æ®ï¼Œåˆ›å»ºæ—¶è‡ªåŠ¨è®¾ç½®
    match /users/{userId} {
      allow read: if request.auth != null;
      allow create: if request.auth == null && request.resource.data.username is string;
      allow update, delete: if false;
    }
    
    // æ¶ˆæ¯é›†åˆï¼šå·²ç™»å½•ç”¨æˆ·å¯è¯»å†™
    match /messages/{messageId} {
      allow read: if true;
      allow create: if request.resource.data.username is string && 
                       request.resource.data.message is string &&
                       request.resource.data.timestamp is number;
      allow delete: if true; // å…è®¸æ¸…ç©ºèŠå¤©
      allow update: if false;
    }
  }
}
```

ç‚¹å‡» **"å‘å¸ƒ"**ã€‚

#### 3.2 Realtime Database è§„åˆ™

è®¿é—®ï¼šhttps://console.firebase.google.com/project/big-pig-38efe/database/rules

ç²˜è´´ä»¥ä¸‹è§„åˆ™ï¼š

```json
{
  "rules": {
    "rooms": {
      ".read": true,
      ".write": true,
      "$roomId": {
        "players": {
          ".indexOn": ["score"]
        }
      }
    },
    "gameSettings": {
      ".read": true,
      ".write": true
    },
    "admin": {
      ".read": true,
      ".write": true
    }
  }
}
```

ç‚¹å‡» **"å‘å¸ƒ"**ã€‚

---

### ç¬¬ 4 æ­¥ï¼šé…ç½® Cloud Functions

#### 4.1 ç¡®è®¤é¡¹ç›®å·²åˆ‡æ¢

```powershell
firebase use
```

åº”è¯¥æ˜¾ç¤ºï¼š`big-pig-38efe (current)`

#### 4.2 é…ç½®ä¸»ç½‘ç¯å¢ƒå˜é‡

**è¿è¡Œä¸»ç½‘é…ç½®å‘½ä»¤ï¼š**

```powershell
# æ–¹å¼1ï¼šæ‰‹åŠ¨é…ç½®ï¼ˆæ¨èï¼‰
firebase functions:config:set token.contract_address="0x83dfb0f9a8059b3dd274b3f4d68da93520fc4444"
firebase functions:config:set wallet.private_key="2159c1bcc01193026d313f98a11276f7ed2efe12fba8a0484272b922aaefd47d"
firebase functions:config:set bsc.use_testnet="false"
firebase functions:config:set bsc.rpc_url="https://bsc-dataseed1.binance.org/"

# æ–¹å¼2ï¼šè¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶
.\ä¸»ç½‘é…ç½®å‘½ä»¤.bat
```

#### 4.3 éªŒè¯é…ç½®

```powershell
firebase functions:config:get
```

åº”è¯¥æ˜¾ç¤ºï¼š

```json
{
  "bsc": {
    "rpc_url": "https://bsc-dataseed1.binance.org/",
    "use_testnet": "false"
  },
  "token": {
    "contract_address": "0x83dfb0f9a8059b3dd274b3f4d68da93520fc4444"
  },
  "wallet": {
    "private_key": "2159c1bcc01193026d313f98a11276f7ed2efe12fba8a0484272b922aaefd47d"
  }
}
```

---

### ç¬¬ 5 æ­¥ï¼šéƒ¨ç½² Cloud Functions

#### 5.1 å®‰è£…ä¾èµ–

```powershell
cd functions
npm install
cd ..
```

#### 5.2 éƒ¨ç½²å‡½æ•°

```powershell
firebase deploy --only functions
```

å¦‚æœå‡ºç°è®¡è´¹é”™è¯¯ï¼Œç¡®ä¿å·²å‡çº§åˆ° Blaze æ–¹æ¡ˆï¼ˆç¬¬ 2.3 æ­¥ï¼‰ã€‚

#### 5.3 éªŒè¯éƒ¨ç½²

è®¿é—®ï¼šhttps://console.firebase.google.com/project/big-pig-38efe/functions

åº”è¯¥çœ‹åˆ° 3 ä¸ªå·²éƒ¨ç½²çš„å‡½æ•°ï¼š
- `claimToken`
- `getTokenBalance`
- `getWalletStatus`

---

### ç¬¬ 6 æ­¥ï¼šè·å–å‘æ¬¾é’±åŒ…åœ°å€

è¿è¡Œï¼š

```powershell
node è·å–ä¸»ç½‘é’±åŒ…åœ°å€.js
```

åº”è¯¥è¾“å‡ºï¼š

```
========================================
  BSC ä¸»ç½‘é’±åŒ…åœ°å€
========================================

é’±åŒ…åœ°å€: 0x...
ç§é’¥ (å‰8ä½): 2159c1bc...

========================================
  æ¥ä¸‹æ¥è¯·ï¼š
========================================
1. å……å€¼ BNB åˆ°è¯¥åœ°å€ç”¨äº Gas è´¹ (è‡³å°‘ 0.1 BNB)
2. å……å€¼ä»£å¸åˆ°è¯¥åœ°å€ç”¨äºå‘æ”¾å¥–åŠ±
3. åœ¨ BSCScan æŸ¥çœ‹ä½™é¢: https://bscscan.com/address/0x...
```

---

### ç¬¬ 7 æ­¥ï¼šå……å€¼é’±åŒ…

1. **å¤åˆ¶é’±åŒ…åœ°å€**ï¼ˆä»ä¸Šä¸€æ­¥è·å–ï¼‰
2. **å……å€¼ BNB**ï¼šè‡³å°‘ 0.1 BNB ç”¨äº Gas è´¹
3. **å……å€¼ä»£å¸**ï¼šå‘é€è¶³å¤Ÿçš„ä»£å¸åˆ°è¯¥åœ°å€
4. **éªŒè¯ä½™é¢**ï¼šè®¿é—® https://bscscan.com/address/YOUR_ADDRESS

---

### ç¬¬ 8 æ­¥ï¼šæµ‹è¯•åŠŸèƒ½

#### 8.1 æµ‹è¯•èŠå¤©å®¤

1. æ‰“å¼€ `index.html`
2. ç‚¹å‡» "Chat Room"
3. æ³¨å†Œå¹¶ç™»å½•
4. å‘é€æ¶ˆæ¯
5. æ£€æŸ¥ Firestore ä¸­æ˜¯å¦æœ‰æ•°æ®

#### 8.2 æµ‹è¯•æ¸¸æˆ

1. æ‰“å¼€ `index.html`
2. ç‚¹å‡» "Multiplayer Snake Game"
3. è¾“å…¥ BSC é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰
4. å¼€å§‹æ¸¸æˆ
5. æ£€æŸ¥ Realtime Database ä¸­æ˜¯å¦æœ‰æ•°æ®

#### 8.3 æµ‹è¯•ä»£å¸å…‘æ¢

1. åœ¨æ¸¸æˆä¸­è·å¾—ç§¯åˆ†ï¼ˆåƒæ»¡ 100 ä¸ªé£Ÿç‰©ï¼‰
2. ç‚¹å‡» "Claim Tokens"
3. æ£€æŸ¥äº¤æ˜“ï¼šhttps://bscscan.com
4. éªŒè¯ä»£å¸æ˜¯å¦åˆ°è´¦

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] Firebase é¡¹ç›®å·²åˆ‡æ¢åˆ° `big-pig-38efe`
- [ ] Firestore å·²å¯ç”¨å¹¶é…ç½®è§„åˆ™
- [ ] Realtime Database å·²å¯ç”¨å¹¶é…ç½®è§„åˆ™
- [ ] å·²å‡çº§åˆ° Blaze è®¡è´¹æ–¹æ¡ˆ
- [ ] Cloud Functions ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] Cloud Functions å·²æˆåŠŸéƒ¨ç½²
- [ ] å‘æ¬¾é’±åŒ…å·²å……å€¼ BNB å’Œä»£å¸
- [ ] èŠå¤©å®¤åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ¸¸æˆåŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] ä»£å¸å…‘æ¢åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²æ—¶æç¤º 403 é”™è¯¯

**A:** éœ€è¦å‡çº§åˆ° Blaze æ–¹æ¡ˆå¹¶ç»‘å®šæ”¯ä»˜æ–¹å¼ã€‚

### Q2: æ¸¸æˆæ— æ³•è¿æ¥

**A:** æ£€æŸ¥ Realtime Database æ˜¯å¦å·²å¯ç”¨ï¼Œæ•°æ®åº“è§„åˆ™æ˜¯å¦æ­£ç¡®ã€‚

### Q3: èŠå¤©å®¤æ— æ³•å‘é€æ¶ˆæ¯

**A:** æ£€æŸ¥ Firestore æ˜¯å¦å·²å¯ç”¨ï¼Œæ•°æ®åº“è§„åˆ™æ˜¯å¦æ­£ç¡®ã€‚

### Q4: ä»£å¸å…‘æ¢å¤±è´¥

**A:** 
1. æ£€æŸ¥é’±åŒ…æ˜¯å¦æœ‰è¶³å¤Ÿçš„ BNBï¼ˆGas è´¹ï¼‰
2. æ£€æŸ¥é’±åŒ…æ˜¯å¦æœ‰è¶³å¤Ÿçš„ä»£å¸
3. æ£€æŸ¥ Cloud Functions æ—¥å¿—ï¼š`firebase functions:log`

### Q5: å¦‚ä½•åˆ‡æ¢å›æµ‹è¯•ç½‘ï¼Ÿ

**A:** è¿è¡Œï¼š
```powershell
firebase functions:config:set bsc.use_testnet="true"
firebase deploy --only functions
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Firebase æ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—
2. æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
3. Cloud Functions æ—¥å¿—ï¼š`firebase functions:log`

---

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

