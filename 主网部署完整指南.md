# ğŸš€ BSC ä¸»ç½‘éƒ¨ç½²å®Œæ•´æŒ‡å—

## âš ï¸ é‡è¦æé†’

è¿™æ˜¯ä¸»ç½‘éƒ¨ç½²ï¼Œå°†ä½¿ç”¨çœŸå®èµ„é‡‘ï¼è¯·åŠ¡å¿…ï¼š

1. âœ… å·²åœ¨æµ‹è¯•ç½‘å……åˆ†æµ‹è¯•
2. âœ… ç†è§£æ‰€æœ‰æ“ä½œæµç¨‹
3. âœ… ç¡®è®¤é’±åŒ…æœ‰è¶³å¤Ÿä½™é¢
4. âœ… åšå¥½èµ„é‡‘å®‰å…¨å‡†å¤‡

---

## ğŸ“‹ ä½ çš„é…ç½®ä¿¡æ¯

- **ä»£å¸åˆçº¦åœ°å€ (CA)**: `0x83dfb0f9a8059b3dd274b3f4d68da93520fc4444`
- **é’±åŒ…ç§é’¥**: `2159c1bc...efd47d` (å·²éšè—)
- **ç½‘ç»œ**: BSC ä¸»ç½‘ (Mainnet)

---

## ğŸ” ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥é’±åŒ…ä½™é¢

### 1.1 è·å–é’±åŒ…åœ°å€

```bash
# è¿è¡Œè„šæœ¬è·å–é’±åŒ…åœ°å€
node è·å–ä¸»ç½‘é’±åŒ…åœ°å€.js
```

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
ğŸ“ é’±åŒ…åœ°å€: 0xYourWalletAddress...
```

### 1.2 åœ¨ BscScan æŸ¥çœ‹ä½™é¢

è®¿é—®: `https://bscscan.com/address/ä½ çš„é’±åŒ…åœ°å€`

**æ£€æŸ¥æ¸…å•ï¼š**
- [ ] BNB ä½™é¢ â‰¥ 0.1 BNB
  - ç”¨é€”ï¼šæ”¯ä»˜ Gas è´¹
  - æ¯ç¬”è½¬è´¦çº¦æ¶ˆè€— 0.0001-0.0005 BNB
  - å»ºè®®ä¿æŒè‡³å°‘ 0.1 BNB

- [ ] ä»£å¸ä½™é¢å……è¶³
  - ç”¨é€”ï¼šå‘æ”¾ç»™ç”¨æˆ·
  - å»ºè®®æ ¹æ®é¢„æœŸç”¨æˆ·é‡å‡†å¤‡
  - å¯ä»¥éšæ—¶å……å€¼

### 1.3 å¦‚æœä½™é¢ä¸è¶³

**å……å€¼ BNB:**
- ä»äº¤æ˜“æ‰€è´­ä¹°å¹¶æç°åˆ°ä½ çš„é’±åŒ…åœ°å€
- æˆ–ä»å…¶ä»–é’±åŒ…è½¬è´¦

**å……å€¼ä»£å¸:**
- ä»ä»£å¸éƒ¨ç½²é’±åŒ…è½¬è´¦
- æˆ–ä»äº¤æ˜“æ‰€æç°ï¼ˆå¦‚æœä»£å¸å·²ä¸Šæ‰€ï¼‰

---

## ğŸš€ ç¬¬äºŒæ­¥ï¼šéƒ¨ç½² Cloud Functions

### æ–¹å¼ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```batch
# åŒå‡»è¿è¡Œ
ä¸»ç½‘é…ç½®å‘½ä»¤.bat
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… å®‰è£… Firebase CLI
2. âœ… ç™»å½• Firebase
3. âœ… é…ç½®ç¯å¢ƒå˜é‡ï¼ˆä»£å¸CAã€ç§é’¥ã€ä¸»ç½‘ï¼‰
4. âœ… å®‰è£…ä¾èµ–
5. âœ… éƒ¨ç½²åˆ° Firebase

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤

```bash
# 1. å®‰è£… Firebase CLI
npm install -g firebase-tools

# 2. ç™»å½•
firebase login

# 3. é…ç½®ä»£å¸åˆçº¦åœ°å€
firebase functions:config:set token.contract_address="0x83dfb0f9a8059b3dd274b3f4d68da93520fc4444"

# 4. é…ç½®é’±åŒ…ç§é’¥
firebase functions:config:set wallet.private_key="2159c1bcc01193026d313f98a11276f7ed2efe12fba8a0484272b922aaefd47d"

# 5. è®¾ç½®ä¸ºä¸»ç½‘
firebase functions:config:set bsc.use_testnet="false"

# 6. è®¾ç½®ä¸»ç½‘ RPC
firebase functions:config:set bsc.rpc_url="https://bsc-dataseed1.binance.org/"

# 7. æŸ¥çœ‹é…ç½®
firebase functions:config:get

# 8. å®‰è£…ä¾èµ–
cd functions
npm install
cd ..

# 9. éƒ¨ç½²
firebase deploy --only functions
```

---

## ğŸ§ª ç¬¬ä¸‰æ­¥ï¼šå°é¢æµ‹è¯•ï¼ˆé‡è¦ï¼ï¼‰

âš ï¸ **å¼ºçƒˆå»ºè®®å…ˆç”¨å°é¢æµ‹è¯•ï¼Œç¡®è®¤ä¸€åˆ‡æ­£å¸¸åå†å¤§è§„æ¨¡ä½¿ç”¨ï¼**

### 3.1 æŸ¥è¯¢é’±åŒ…çŠ¶æ€

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `snake.html`ï¼Œåœ¨æ§åˆ¶å°æ‰§è¡Œï¼š

```javascript
const getStatus = firebase.functions().httpsCallable('getWalletStatus');

getStatus().then(result => {
    console.log('========================================');
    console.log('         é’±åŒ…çŠ¶æ€æŸ¥è¯¢');
    console.log('========================================');
    console.log('é’±åŒ…åœ°å€:', result.data.walletAddress);
    console.log('BNB ä½™é¢:', result.data.bnbBalance, 'BNB');
    console.log('ä»£å¸ä½™é¢:', result.data.tokenBalance);
    console.log('ä»£å¸ç¬¦å·:', result.data.tokenSymbol);
    console.log('ç½‘ç»œ:', result.data.network);
    console.log('åˆçº¦åœ°å€:', result.data.contractAddress);
    console.log('========================================');
}).catch(error => {
    console.error('âŒ æŸ¥è¯¢å¤±è´¥:', error);
});
```

**é¢„æœŸè¾“å‡º:**
```
é’±åŒ…åœ°å€: 0x...
BNB ä½™é¢: 0.15 BNB
ä»£å¸ä½™é¢: 100000
ä»£å¸ç¬¦å·: YOUR_TOKEN
ç½‘ç»œ: BSC Mainnet
åˆçº¦åœ°å€: 0x83dfb0f9a8059b3dd274b3f4d68da93520fc4444
```

### 3.2 å°é¢è½¬è´¦æµ‹è¯•ï¼ˆ1 ç§¯åˆ† = 10 ä»£å¸ï¼‰

**æ­¥éª¤ï¼š**

1. **åœ¨ Firebase æ•°æ®åº“è®¾ç½®æµ‹è¯•ç§¯åˆ†**
   - è®¿é—®: https://console.firebase.google.com/
   - é¡¹ç›®: chat-294cc
   - Realtime Database â†’ æ•°æ®
   - åˆ›å»ºè·¯å¾„: `users/ä½ çš„æµ‹è¯•é’±åŒ…åœ°å€/score = 1`

2. **æ‰§è¡Œæµ‹è¯•è½¬è´¦**
   ```javascript
   const claimToken = firebase.functions().httpsCallable('claimToken');
   
   claimToken({ 
       wallet: 'ä½ çš„æµ‹è¯•é’±åŒ…åœ°å€' 
   }).then(result => {
       console.log('========================================');
       console.log('         è½¬è´¦æˆåŠŸï¼');
       console.log('========================================');
       console.log('âœ… äº¤æ˜“å“ˆå¸Œ:', result.data.tx);
       console.log('âœ… åŒºå—å·:', result.data.blockNumber);
       console.log('âœ… è½¬è´¦æ•°é‡:', result.data.amount, 'ä»£å¸');
       console.log('âœ… æŸ¥çœ‹äº¤æ˜“:', result.data.explorerUrl);
       console.log('========================================');
       
       // è‡ªåŠ¨æ‰“å¼€ BscScan æŸ¥çœ‹äº¤æ˜“
       window.open(result.data.explorerUrl, '_blank');
   }).catch(error => {
       console.error('âŒ è½¬è´¦å¤±è´¥:', error);
       console.error('é”™è¯¯è¯¦æƒ…:', error.message);
   });
   ```

3. **åœ¨ BscScan éªŒè¯**
   - è‡ªåŠ¨æ‰“å¼€çš„é¡µé¢æˆ–è®¿é—®: https://bscscan.com/tx/äº¤æ˜“å“ˆå¸Œ
   - æ£€æŸ¥ï¼š
     - âœ… Status: Success (æˆåŠŸ)
     - âœ… From: å‘æ¬¾é’±åŒ…åœ°å€
     - âœ… To: ä»£å¸åˆçº¦åœ°å€
     - âœ… Tokens Transferred: çœ‹åˆ°ä»£å¸è½¬è´¦è®°å½•

4. **æ£€æŸ¥æ¥æ”¶åœ°å€ä½™é¢**
   - è®¿é—®: https://bscscan.com/address/ä½ çš„æµ‹è¯•é’±åŒ…åœ°å€
   - åœ¨ "Token" æ ‡ç­¾é¡µæŸ¥çœ‹ä»£å¸ä½™é¢æ˜¯å¦å¢åŠ 

---

## ğŸ“Š ç¬¬å››æ­¥ï¼šç›‘æ§ä¸ç®¡ç†

### 4.1 æŸ¥çœ‹ Cloud Functions æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
firebase functions:log --only claimToken

# æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—
firebase functions:log --lines 100
```

### 4.2 Firebase æ§åˆ¶å°ç›‘æ§

è®¿é—®: https://console.firebase.google.com/

- **Functions**: 
  - æŸ¥çœ‹å‡½æ•°è°ƒç”¨æ¬¡æ•°
  - ç›‘æ§é”™è¯¯ç‡
  - æŸ¥çœ‹æ‰§è¡Œæ—¶é—´

- **Realtime Database**:
  - `transactions/` - æŸ¥çœ‹æˆåŠŸçš„äº¤æ˜“è®°å½•
  - `failedTransactions/` - æŸ¥çœ‹å¤±è´¥çš„äº¤æ˜“
  - `users/` - æŸ¥çœ‹ç”¨æˆ·ç§¯åˆ†

### 4.3 é’±åŒ…ä½™é¢ç›‘æ§

å®šæœŸæ£€æŸ¥å‘æ¬¾é’±åŒ…ä½™é¢ï¼š

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°å®šæœŸæ‰§è¡Œ
const getStatus = firebase.functions().httpsCallable('getWalletStatus');
getStatus().then(r => {
    console.log('BNB:', r.data.bnbBalance);
    console.log('ä»£å¸:', r.data.tokenBalance);
});
```

**è®¾ç½®å‘Šè­¦ï¼š**
- BNB < 0.05: éœ€è¦å……å€¼
- ä»£å¸ < é¢„ä¼°ä¸€å‘¨ä½¿ç”¨é‡: éœ€è¦å……å€¼

---

## ğŸ”’ å®‰å…¨æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰
- [ ] å·²åœ¨æµ‹è¯•ç½‘å……åˆ†æµ‹è¯•
- [ ] ç¡®è®¤é…ç½®ä¿¡æ¯æ­£ç¡®
- [ ] é’±åŒ…ä½™é¢å……è¶³
- [ ] ç†è§£è½¬è´¦æµç¨‹

### éƒ¨ç½²å
- [ ] å°é¢æµ‹è¯•æˆåŠŸ
- [ ] æ—¥å¿—æ— é”™è¯¯
- [ ] äº¤æ˜“åœ¨ BscScan å¯æŸ¥
- [ ] ä»£å¸å®é™…åˆ°è´¦

### æ—¥å¸¸ç»´æŠ¤
- [ ] å®šæœŸæ£€æŸ¥é’±åŒ…ä½™é¢
- [ ] ç›‘æ§äº¤æ˜“è®°å½•
- [ ] æŸ¥çœ‹é”™è¯¯æ—¥å¿—
- [ ] å¤‡ä»½é‡è¦æ•°æ®

---

## ğŸ’° è´¹ç”¨é¢„ä¼°

### æ¯ç¬”è½¬è´¦æˆæœ¬

**Gas è´¹ç”¨:**
- Gas æ¶ˆè€—: ~50,000 Gas
- Gas Price: ~5 Gwei
- è´¹ç”¨: ~0.00025 BNB â‰ˆ $0.075

**ä»£å¸æˆæœ¬:**
- 1 ç§¯åˆ† = 10 ä»£å¸
- 10 ç§¯åˆ† = 100 ä»£å¸
- 100 ç§¯åˆ† = 1000 ä»£å¸

### æœˆåº¦é¢„ä¼°ï¼ˆ10,000 æ¬¡è½¬è´¦ï¼‰

- Gas è´¹: ~2.5 BNB â‰ˆ $750
- Firebase: ~$0.02
- **æ€»è®¡: ~$750**

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å……å€¼é’±åŒ…ï¼Ÿ
**A:** 
1. å¤åˆ¶é’±åŒ…åœ°å€
2. ä»äº¤æ˜“æ‰€æˆ–å…¶ä»–é’±åŒ…è½¬è´¦
3. ç­‰å¾…ç¡®è®¤ååˆ·æ–°ä½™é¢

### Q: Gas è´¹ä¸å¤Ÿæ€ä¹ˆåŠï¼Ÿ
**A:** å‘é’±åŒ…åœ°å€è½¬å…¥æ›´å¤š BNB

### Q: å¦‚ä½•æ›´æ¢å‘æ¬¾é’±åŒ…ï¼Ÿ
**A:**
```bash
# 1. è½¬ç§»æ—§é’±åŒ…èµ„äº§
# 2. æ›´æ–°é…ç½®
firebase functions:config:set wallet.private_key="æ–°é’±åŒ…ç§é’¥"
firebase deploy --only functions
```

### Q: å¦‚ä½•æš‚åœæœåŠ¡ï¼Ÿ
**A:**
```bash
# æ–¹æ³•1: åˆ é™¤å‡½æ•°
firebase functions:delete claimToken

# æ–¹æ³•2: åœ¨ä»£ç ä¸­æ·»åŠ ç»´æŠ¤æ¨¡å¼æ£€æŸ¥
```

### Q: äº¤æ˜“å¤±è´¥å¦‚ä½•å¤„ç†ï¼Ÿ
**A:**
1. æŸ¥çœ‹ `failedTransactions/` æ•°æ®åº“è®°å½•
2. æ£€æŸ¥é’±åŒ…ä½™é¢
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
4. å¿…è¦æ—¶æ‰‹åŠ¨å¤„ç†

---

## ğŸ†˜ ç´§æ€¥æƒ…å†µå¤„ç†

### ç§é’¥æ³„éœ²
1. âš ï¸ ç«‹å³å°†æ‰€æœ‰èµ„äº§è½¬ç§»åˆ°æ–°é’±åŒ…
2. æ›´æ–°é…ç½®ä¸ºæ–°é’±åŒ…ç§é’¥
3. é‡æ–°éƒ¨ç½²
4. åºŸå¼ƒæ—§é’±åŒ…

### ä½™é¢è€—å°½
1. æš‚åœæ¸¸æˆï¼ˆé¿å…ç”¨æˆ·ç§¯åˆ†æ— æ³•å…‘æ¢ï¼‰
2. å……å€¼é’±åŒ…
3. æµ‹è¯•è½¬è´¦
4. æ¢å¤æ¸¸æˆ

### å¤§é‡å¼‚å¸¸äº¤æ˜“
1. æŸ¥çœ‹æ—¥å¿—æ‰¾å‡ºåŸå› 
2. å¿…è¦æ—¶æš‚åœæœåŠ¡
3. ä¿®å¤é—®é¢˜
4. é‡æ–°éƒ¨ç½²

---

## âœ… éƒ¨ç½²å®Œæˆç¡®è®¤

å®Œæˆä»¥ä¸‹æ£€æŸ¥åï¼Œç³»ç»Ÿå³å¯æŠ•å…¥ä½¿ç”¨ï¼š

- [ ] ä¸»ç½‘é…ç½®å·²éƒ¨ç½²
- [ ] å°é¢æµ‹è¯•è½¬è´¦æˆåŠŸ
- [ ] BscScan å¯æŸ¥çœ‹äº¤æ˜“
- [ ] é’±åŒ…ä½™é¢å……è¶³ï¼ˆBNB + ä»£å¸ï¼‰
- [ ] Firebase æ—¥å¿—æ­£å¸¸
- [ ] ç›‘æ§ç³»ç»Ÿå·²è®¾ç½®
- [ ] äº†è§£ç´§æ€¥å¤„ç†æµç¨‹

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜æ—¶ï¼š

1. æŸ¥çœ‹æ—¥å¿—: `firebase functions:log`
2. æ£€æŸ¥é…ç½®: `firebase functions:config:get`
3. æŸ¥çœ‹æ–‡æ¡£: TESTING_GUIDE.md
4. æ£€æŸ¥ BscScan äº¤æ˜“è¯¦æƒ…

---

**ä¸»ç½‘éƒ¨ç½²å®Œæˆï¼ç¥è¿è¥é¡ºåˆ©ï¼** ğŸ‰

è®°ä½ï¼š
- å®šæœŸæ£€æŸ¥é’±åŒ…ä½™é¢
- ç›‘æ§äº¤æ˜“æ—¥å¿—
- åšå¥½æ•°æ®å¤‡ä»½
- ä¿ç®¡å¥½ç§é’¥

